<!---<script type="module">
    import { MidiParser } from './lib/midi-parser.js';
    window.MidiParser = MidiParser;
    var source = document.getElementById('MIDI');
    MidiParser.parse(source, function (obj) {
        readMIDI(obj);
    });
</script>-->
<script src="./lib/midi-parser.js"></script>
<script src="./lib/encode.js"></script>
<script src="./lib/ffmpeg.js"></script>
<script src="./lib/notes.js"></script>
<script src="./lib/read-midi.js"></script>
<script src="./lib/bundle.js"></script>
<script src="./lib/web-audio.js"></script>
<script src="./lib/index.js"></script>
<script src="./lib/fft/real.js"></script>
<script src="./lib/fft/complex.js"></script>
<style>
    * {
        font-family: Calibri, Candara, Segoe, Segoe UI, Optima, Arial, sans-serif;
        color: white;
        background-color: rgb(29, 29, 29);
    }
</style>

<body>
    MIDI File:
    <input id="MIDI" type="file" name="file" />
    <br />
    Audio File:
    <input id="AUDIO" type="file" name="file" />
    <br />
    <input type="checkbox" class="length">MIDI-Controlled Length</input>
    <br />
    Minimum Note Length:
    <input type="range" class="minimum" min="0" max="1" step="0.001" value="0.25" /><br />
    Maximum Note Length:
    <input type="range" class="maximum" min="0" max="1" step="0.001" value="1" /><br />
    Gain:
    <input type="range" class="gain" min="0" max="1" step="0.001" value="1" /><br />
    Effect:
    <select id="effect">
        <option value="delay">Delay</option>
        <option value="reverb">Reverb</option>
        <option value="distortion">Distortion</option>
        <option value="none" selected>None</option>
    </select>
    <br />
    <input type="checkbox" class="sensor">Sensor Input</input>
    <br />
    <span class="sensorInfo" hidden>
        Parameter Index:
        <input type="number" class="sensorIndex" value="2"></input>
        <br />
    </span>
    <div class="delayControl" hidden>
        Feedback: <input type="range" class="feedback" min="0" max="1" step="0.001" /><br />
        Delay Time: <input type="range" class="delayTime" min="1" max="1000" step="0.001" /><br />
        Wet Level: <input type="range" class="wetLevel" min="0" max="1" step="0.001" /><br />
        Dry Level: <input type="range" class="dryLevel" min="0" max="1" step="0.001" /><br />
    </div>
    <div class="reverbFile" hidden>
        Impulse Response:
        <input id="REVERB" type="file" name="file" />
    </div>
    <br />
    <button onclick="run();">
        Run
    </button>
    <button onclick="stop();">
        Stop
    </button>
    <input type="checkbox" class="live">Live</input>
</body>